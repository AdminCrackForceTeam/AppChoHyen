<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Há»‡ Thá»‘ng Tráº¯c Nghiá»‡m Full</title>
<style>
body{margin:0;font-family:Arial,sans-serif;background: linear-gradient(135deg,#2196f3,#00bcd4);color:#333;}
.box{max-width:900px;margin:20px auto;background:white;padding:20px;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,0.3);}
h2{text-align:center;color:#1565c0}
button{width:100%;padding:12px;border:none;border-radius:8px;background:#1e88e5;color:white;font-size:16px;margin:6px 0}
button:hover{background:#1565c0}
input,select{width:100%;padding:8px;margin:5px 0;border-radius:6px;border:1px solid #ccc}
.answer{border:1px solid #ccc;padding:10px;margin:6px 0;border-radius:6px;cursor:pointer}
.answer:hover{background:#e3f2fd}
.correct{background:#43a047;color:white}
.wrong{background:#e53935;color:white}
.progress{height:10px;background:#ddd;border-radius:6px;overflow:hidden;margin:10px 0}
.bar{height:100%;background:#1e88e5;width:0%}
.hidden{display:none}
.list{background:#f5f5f5;padding:8px;margin:6px 0;border-radius:6px;display:flex;justify-content:space-between}
header{text-align:center;font-weight:bold;margin-bottom:10px}
table{width:100%;border-collapse:collapse}
td,th{border:1px solid #ccc;padding:6px}
th{background:#1e88e5;color:white}
</style>
</head>
<body>

<!-- MENU -->
<div class="box" id="menu">
<header>ğŸ“˜ Há»† THá»NG TRáº®C NGHIá»†M</header>
<button onclick="loginTeacher()">ğŸ§‘â€ğŸ« GIÃO VIÃŠN</button>
<button onclick="openStudent()">ğŸ‘¨â€ğŸ“ Há»ŒC SINH</button>
</div>

<!-- LOGIN -->
<div class="box hidden" id="login">
<input type="password" id="pwd" placeholder="Máº­t kháº©u giÃ¡o viÃªn">
<button onclick="checkPwd()">ÄÄƒng nháº­p</button>
<button onclick="backMenu()">â¬… Quay láº¡i</button>
</div>

<!-- GIÃO VIÃŠN -->
<div class="box hidden" id="teacher">
<header>ğŸ§‘â€ğŸ« QUáº¢N LÃ CÃ‚U Há»I</header>

<select id="subject">
<option value="toan">ToÃ¡n</option>
<option value="nguvan">Ngá»¯ vÄƒn</option>
<option value="hoa">HÃ³a</option>
<option value="sinh">Sinh</option>
<option value="su">Sá»­</option>
<option value="dia">Äá»‹a</option>
<option value="vatly">Váº­t lÃ½</option>
</select>

<input id="q" placeholder="CÃ¢u há»i">
<input id="a1" placeholder="ÄÃ¡p Ã¡n A">
<input id="a2" placeholder="ÄÃ¡p Ã¡n B">
<input id="a3" placeholder="ÄÃ¡p Ã¡n C">
<input id="a4" placeholder="ÄÃ¡p Ã¡n D">

<select id="correct">
<option value="0">ÄÃºng A</option>
<option value="1">ÄÃºng B</option>
<option value="2">ÄÃºng C</option>
<option value="3">ÄÃºng D</option>
</select>

<button onclick="addQuestion()">â• LÆ°u cÃ¢u há»i</button>
<button onclick="loadList()">ğŸ“„ Xem cÃ¢u há»i</button>

<hr>
<h3>ğŸ“Š Äiá»ƒm há»c sinh</h3>
<select id="scoreSubject">
<option value="toan">ToÃ¡n</option>
<option value="nguvan">Ngá»¯ vÄƒn</option>
<option value="hoa">HÃ³a</option>
<option value="sinh">Sinh</option>
<option value="su">Sá»­</option>
<option value="dia">Äá»‹a</option>
<option value="vatly">Váº­t lÃ½</option>
</select>
<button onclick="loadScores()">Xem Ä‘iá»ƒm</button>
<div id="scores"></div>

<button onclick="backMenu()">â¬… Quay láº¡i</button>
<div id="list"></div>
</div>

<!-- Há»ŒC SINH -->
<div class="box hidden" id="student">
<header>ğŸ“˜ LÃ€M BÃ€I</header>
<input id="studentName" placeholder="Nháº­p tÃªn">
<select id="subChoose">
<option value="toan">ToÃ¡n</option>
<option value="nguvan">Ngá»¯ vÄƒn</option>
<option value="hoa">HÃ³a</option>
<option value="sinh">Sinh</option>
<option value="su">Sá»­</option>
<option value="dia">Äá»‹a</option>
<option value="vatly">Váº­t lÃ½</option>
</select>
<button onclick="startQuiz()">â–¶ Báº¯t Ä‘áº§u</button>

<div class="progress"><div class="bar" id="bar"></div></div>
<div id="quiz"></div>
<button onclick="next()" id="nextBtn">Tiáº¿p theo</button>
<div id="result"></div>
<button class="hidden" id="backStudent" onclick="backMenu()">â¬… Quay láº¡i</button>
</div>

<audio id="ting" src="https://freesound.org/data/previews/341/341695_6261545-lq.mp3"></audio>
<audio id="wrong" src="https://freesound.org/data/previews/456/456618_7037-lq.mp3"></audio>

<script>
const teacherPwd="123456";
let questions=[],i=0,score=0,selected=-1,studentName="";

function backMenu(){
menu.classList.remove("hidden");
login.classList.add("hidden");
teacher.classList.add("hidden");
student.classList.add("hidden");
}

function loginTeacher(){
menu.classList.add("hidden");
login.classList.remove("hidden");
}

function checkPwd(){
if(pwd.value===teacherPwd){
login.classList.add("hidden");
teacher.classList.remove("hidden");
}else alert("Sai máº­t kháº©u");
}

function getData(){
return JSON.parse(localStorage.getItem("quiz_"+subject.value)||"[]");
}
function saveData(d){
localStorage.setItem("quiz_"+subject.value,JSON.stringify(d));
}

function addQuestion(){
let d=getData();
d.push({q:q.value,a:[a1.value,a2.value,a3.value,a4.value],c:+correct.value});
saveData(d);
alert("ÄÃ£ lÆ°u");
}

function loadList(){
let d=getData();
list.innerHTML="";
d.forEach((x,i)=>{
list.innerHTML+=`<div class="list">${i+1}. ${x.q}
<button onclick="del(${i})">âŒ</button></div>`;
});
}

function del(i){
let d=getData();
d.splice(i,1);
saveData(d);
loadList();
}

function openStudent(){
menu.classList.add("hidden");
student.classList.remove("hidden");
}

function startQuiz(){
studentName=studentNameInput.value||studentName.value;
questions=JSON.parse(localStorage.getItem("quiz_"+subChoose.value)||"[]");
i=0;score=0;
loadQ();
}

function loadQ(){
let q=questions[i];
quiz.innerHTML=`<b>CÃ¢u ${i+1}: ${q.q}</b>`;
q.a.forEach((x,j)=>{
quiz.innerHTML+=`<div class="answer" onclick="choose(${j},this)">${x}</div>`;
});
bar.style.width=(i/questions.length*100)+"%";
}

function choose(j,e){
selected=j;
document.querySelectorAll(".answer").forEach(x=>x.classList.remove("active"));
e.classList.add("active");
}

function next(){
let q=questions[i];
if(selected==q.c){score++;ting.play();}
else wrong.play();
i++;
if(i<questions.length) loadQ();
else{
quiz.innerHTML="";
result.innerHTML=`ğŸ‰ HoÃ n thÃ nh<br>Äiá»ƒm: <b>${score}/${questions.length}</b>`;
}
}

function loadScores(){
let s=JSON.parse(localStorage.getItem("score_"+scoreSubject.value)||"[]");
let html="<table><tr><th>TÃªn</th><th>Äiá»ƒm</th></tr>";
s.forEach(x=>html+=`<tr><td>${x.name}</td><td>${x.score}</td></tr>`);
scores.innerHTML=html+"</table>";
}
</script>
</body>
</html>
