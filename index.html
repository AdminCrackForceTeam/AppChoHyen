<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Há»‡ Thá»‘ng Tráº¯c Nghiá»‡m</title>

<style>
body{margin:0;font-family:Arial;background:linear-gradient(135deg,#2196f3,#00bcd4)}
.box{max-width:900px;margin:20px auto;background:#fff;padding:20px;border-radius:12px}
button{width:100%;padding:12px;border:none;border-radius:8px;background:#1e88e5;color:white;margin:5px 0}
button:hover{background:#1565c0}
input,select{width:100%;padding:8px;margin:5px 0;border-radius:6px;border:1px solid #ccc}
.answer{border:1px solid #ccc;padding:10px;margin:6px 0;border-radius:6px;cursor:pointer}
.answer:hover{background:#e3f2fd}
.correct{background:#43a047;color:white}
.wrong{background:#e53935;color:white}
.hidden{display:none}
.progress{height:10px;background:#ddd;border-radius:6px;margin:10px 0}
.bar{height:100%;background:#1e88e5;width:0%}
table{width:100%;border-collapse:collapse}
th,td{border:1px solid #ccc;padding:6px}
th{background:#1e88e5;color:white}
</style>
</head>

<body>

<!-- MENU -->
<div class="box" id="menu">
<h2>ğŸ“˜ Há»† THá»NG TRáº®C NGHIá»†M</h2>
<button onclick="loginTeacher()">ğŸ‘¨â€ğŸ« GiÃ¡o viÃªn</button>
<button onclick="openStudent()">ğŸ‘¨â€ğŸ“ Há»c sinh</button>
</div>

<!-- LOGIN -->
<div class="box hidden" id="login">
<input id="pwd" type="password" placeholder="Máº­t kháº©u giÃ¡o viÃªn">
<button onclick="checkPwd()">ÄÄƒng nháº­p</button>
<button onclick="backMenu()">â¬… Quay láº¡i</button>
</div>

<!-- GIÃO VIÃŠN -->
<div class="box hidden" id="teacher">
<h3>ğŸ§‘â€ğŸ« Quáº£n lÃ½ cÃ¢u há»i</h3>

<select id="subject">
<option value="toan">ToÃ¡n</option>
<option value="van">Ngá»¯ VÄƒn</option>
<option value="anh">Tiáº¿ng Anh</option>
<option value="ly">Váº­t LÃ½</option>
<option value="hoa">HÃ³a</option>
<option value="sinh">Sinh</option>
<option value="su">Lá»‹ch Sá»­</option>
</select>

<input id="q" placeholder="CÃ¢u há»i">
<input id="a1" placeholder="ÄÃ¡p Ã¡n A">
<input id="a2" placeholder="ÄÃ¡p Ã¡n B">
<input id="a3" placeholder="ÄÃ¡p Ã¡n C">
<input id="a4" placeholder="ÄÃ¡p Ã¡n D">

<select id="correct">
<option value="0">ÄÃºng A</option>
<option value="1">ÄÃºng B</option>
<option value="2">ÄÃºng C</option>
<option value="3">ÄÃºng D</option>
</select>

<button onclick="addQuestion()">â• ThÃªm cÃ¢u há»i</button>
<button onclick="loadList()">ğŸ“„ Xem cÃ¢u há»i</button>

<div id="list"></div>

<hr>
<h3>ğŸ“Š Káº¿t quáº£ há»c sinh</h3>
<button onclick="loadScores()">Xem káº¿t quáº£</button>
<div id="scores"></div>

<button onclick="backMenu()">â¬… Quay láº¡i</button>
</div>

<!-- Há»ŒC SINH -->
<div class="box hidden" id="student">
<h3>ğŸ“˜ LÃ m bÃ i</h3>
<input id="studentName" placeholder="Nháº­p tÃªn">
<select id="subChoose">
<option value="toan">ToÃ¡n</option>
<option value="van">Ngá»¯ VÄƒn</option>
<option value="anh">Tiáº¿ng Anh</option>
<option value="ly">Váº­t LÃ½</option>
<option value="hoa">HÃ³a</option>
<option value="sinh">Sinh</option>
<option value="su">Lá»‹ch Sá»­</option>
</select>

<button onclick="startQuiz()">â–¶ Báº¯t Ä‘áº§u</button>

<div class="progress"><div class="bar" id="bar"></div></div>
<div id="quiz"></div>
<button onclick="next()">Tiáº¿p theo</button>
<div id="result"></div>
</div>

<script>
const teacherPwd="14032008";
let questions=[],i=0,score=0,selected=-1;

function backMenu(){
menu.classList.remove("hidden");
login.classList.add("hidden");
teacher.classList.add("hidden");
student.classList.add("hidden");
}

function loginTeacher(){
menu.classList.add("hidden");
login.classList.remove("hidden");
}

function checkPwd(){
if(pwd.value===teacherPwd){
login.classList.add("hidden");
teacher.classList.remove("hidden");
}else alert("Sai máº­t kháº©u!");
}

function getData(){
return JSON.parse(localStorage.getItem("quiz_"+subject.value)||"[]");
}
function saveData(d){
localStorage.setItem("quiz_"+subject.value,JSON.stringify(d));
}

function addQuestion(){
let d=getData();
d.push({q:q.value,a:[a1.value,a2.value,a3.value,a4.value],c:+correct.value});
saveData(d);
alert("ÄÃ£ lÆ°u cÃ¢u há»i");
}

function loadList(){
let d=getData();
list.innerHTML="";
d.forEach((x,i)=>{
list.innerHTML+=`<div>${i+1}. ${x.q}</div>`;
});
}

function openStudent(){
menu.classList.add("hidden");
student.classList.remove("hidden");
}

function startQuiz(){
let name=studentName.value;
if(!name){alert("Nháº­p tÃªn");return;}
questions=JSON.parse(localStorage.getItem("quiz_"+subChoose.value)||"[]");
if(!questions.length){alert("ChÆ°a cÃ³ cÃ¢u há»i");return;}
i=0;score=0;
loadQ();
}

function loadQ(){
let q=questions[i];
quiz.innerHTML=`<b>CÃ¢u ${i+1}: ${q.q}</b>`;
q.a.forEach((x,j)=>{
quiz.innerHTML+=`<div class="answer" onclick="choose(${j},this)">${x}</div>`;
});
bar.style.width=(i/questions.length*100)+"%";
}

function choose(j,e){
selected=j;
document.querySelectorAll(".answer").forEach(x=>x.classList.remove("correct","wrong"));
if(j==questions[i].c) e.classList.add("correct");
else e.classList.add("wrong");
}

function next(){
if(selected==questions[i].c) score++;
i++;
if(i<questions.length) loadQ();
else{
let data=JSON.parse(localStorage.getItem("scores")||"[]");
data.push({
name:studentName.value,
subject:subChoose.value,
score:score,
date:new Date().toLocaleString()
});
localStorage.setItem("scores",JSON.stringify(data));
quiz.innerHTML="";
result.innerHTML=`ğŸ‰ HoÃ n thÃ nh<br>Äiá»ƒm: ${score}/${questions.length}`;
}
}

function loadScores(){
let d=JSON.parse(localStorage.getItem("scores")||"[]");
let html="<table><tr><th>TÃªn</th><th>MÃ´n</th><th>Äiá»ƒm</th><th>NgÃ y</th></tr>";
d.forEach(x=>{
html+=`<tr><td>${x.name}</td><td>${x.subject}</td><td>${x.score}</td><td>${x.date}</td></tr>`;
});
scores.innerHTML=html+"</table>";
}
</script>
</body>
</html>
