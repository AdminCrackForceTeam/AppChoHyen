<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Há»‡ Thá»‘ng Tráº¯c Nghiá»‡m</title>

<style>
body{
    margin:0;
    font-family:Arial;
    background:linear-gradient(135deg,#2196f3,#00bcd4);
}
.box{
    max-width:850px;
    margin:20px auto;
    background:#fff;
    padding:20px;
    border-radius:12px;
    box-shadow:0 4px 15px rgba(0,0,0,.3);
}
h2{text-align:center;color:#1565c0}
button{
    width:100%;
    padding:12px;
    border:none;
    border-radius:8px;
    background:#1e88e5;
    color:white;
    font-size:16px;
    margin-top:8px;
}
input,select{
    width:100%;
    padding:8px;
    margin:5px 0;
}
.answer{
    border:1px solid #ccc;
    padding:10px;
    margin:6px 0;
    border-radius:6px;
    cursor:pointer;
}
.answer:hover{background:#e3f2fd}
.correct{background:#43a047;color:white}
.wrong{background:#e53935;color:white}
.progress{height:8px;background:#ddd;border-radius:6px;overflow:hidden}
.bar{height:100%;background:#1e88e5;width:0%}
.hidden{display:none}
.list{background:#f5f5f5;padding:8px;margin:6px 0;border-radius:6px}
</style>
</head>

<body>

<!-- MENU -->
<div class="box" id="menu">
<h2>ğŸ“˜ Há»† THá»NG TRáº®C NGHIá»†M</h2>
<button onclick="openTeacher()">ğŸ§‘â€ğŸ« GIÃO VIÃŠN</button>
<button onclick="openStudent()">ğŸ‘¨â€ğŸ“ Há»ŒC SINH</button>
</div>

<!-- GIÃO VIÃŠN -->
<div class="box hidden" id="teacher">
<h2>ğŸ§‘â€ğŸ« SOáº N Äá»€</h2>

<select id="subject">
<option value="dia">ğŸ“˜ Äá»‹a LÃ­</option>
<option value="su">ğŸ“• Lá»‹ch Sá»­</option>
<option value="sinh">ğŸ“— Sinh Há»c</option>
<option value="hoa">ğŸ“™ HÃ³a Há»c</option>
</select>

<input id="q" placeholder="Nháº­p cÃ¢u há»i">
<input id="a1" placeholder="ÄÃ¡p Ã¡n A">
<input id="a2" placeholder="ÄÃ¡p Ã¡n B">
<input id="a3" placeholder="ÄÃ¡p Ã¡n C">
<input id="a4" placeholder="ÄÃ¡p Ã¡n D">

<select id="correct">
<option value="0">ÄÃºng: A</option>
<option value="1">ÄÃºng: B</option>
<option value="2">ÄÃºng: C</option>
<option value="3">ÄÃºng: D</option>
</select>

<button onclick="addQuestion()">â• LÆ°u cÃ¢u há»i</button>
<button onclick="loadList()">ğŸ“„ Xem / XoÃ¡ cÃ¢u há»i</button>
<button onclick="back()">â¬… Quay láº¡i</button>

<div id="list"></div>
</div>

<!-- Há»ŒC SINH -->
<div class="box hidden" id="student">
<h2>ğŸ“˜ LÃ€M BÃ€I</h2>

<select id="subChoose">
<option value="dia">ğŸ“˜ Äá»‹a LÃ­</option>
<option value="su">ğŸ“• Lá»‹ch Sá»­</option>
<option value="sinh">ğŸ“— Sinh Há»c</option>
<option value="hoa">ğŸ“™ HÃ³a Há»c</option>
</select>

<button onclick="startQuiz()">â–¶ Báº¯t Ä‘áº§u</button>

<div class="progress"><div class="bar" id="bar"></div></div>
<div id="quiz"></div>
<button onclick="next()">Tiáº¿p theo</button>
<div id="result"></div>
</div>

<audio id="ting" src="https://www.soundjay.com/buttons/sounds/button-3.mp3"></audio>
<audio id="wrong" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>

<script>
let questions=[],i=0,score=0,selected=-1;

function openTeacher(){
 menu.classList.add("hidden");
 teacher.classList.remove("hidden");
}

function openStudent(){
 menu.classList.add("hidden");
 student.classList.remove("hidden");
}

function back(){location.reload();}

// ==== GIÃO VIÃŠN ====
function getData(){
 let sub=document.getElementById("subject").value;
 return JSON.parse(localStorage.getItem("quiz_"+sub)||"[]");
}

function saveData(data){
 let sub=document.getElementById("subject").value;
 localStorage.setItem("quiz_"+sub,JSON.stringify(data));
}

function addQuestion(){
 let data=getData();
 data.push({
   q:q.value,
   a:[a1.value,a2.value,a3.value,a4.value],
   c:parseInt(correct.value)
 });
 saveData(data);
 alert("ÄÃ£ lÆ°u!");
 q.value=a1.value=a2.value=a3.value=a4.value="";
}

function loadList(){
 let data=getData();
 list.innerHTML="";
 data.forEach((x,i)=>{
   list.innerHTML+=`
   <div class="list">
   ${i+1}. ${x.q}
   <button onclick="del(${i})">âŒ XoÃ¡</button>
   </div>`;
 });
}

function del(i){
 let data=getData();
 data.splice(i,1);
 saveData(data);
 loadList();
}

// ==== Há»ŒC SINH ====
function startQuiz(){
 let sub=subChoose.value;
 questions=JSON.parse(localStorage.getItem("quiz_"+sub)||"[]");
 if(questions.length==0){alert("ChÆ°a cÃ³ Ä‘á»!");return;}
 i=0;score=0;
 loadQ();
}

function loadQ(){
 let q=questions[i];
 quiz.innerHTML=`<b>CÃ¢u ${i+1}: ${q.q}</b>`;
 q.a.forEach((x,j)=>{
   quiz.innerHTML+=`<div class="answer" onclick="choose(${j},this)">${x}</div>`;
 });
 bar.style.width=(i/questions.length*100)+"%";
}

function choose(j,el){
 selected=j;
 document.querySelectorAll(".answer").forEach(e=>e.classList.remove("active"));
 el.classList.add("active");
}

function next(){
 if(selected==-1){alert("Chá»n Ä‘Ã¡p Ã¡n");return;}
 let q=questions[i];
 let ans=document.querySelectorAll(".answer");
 if(selected==q.c){
   ans[selected].classList.add("correct");
   ting.play();score++;
 }else{
   ans[selected].classList.add("wrong");
   wrong.play();
 }
 setTimeout(()=>{
   i++;selected=-1;
   if(i<questions.length) loadQ();
   else quiz.innerHTML=`ğŸ‰ HoÃ n thÃ nh<br>Äiá»ƒm: <b>${score}/${questions.length}</b>`;
 },600);
}
</script>
</body>
</html>
